jobs:
  include:

  - stage: "Base Compiling"
    language: c
    compiler: gcc
    name: "Library Building"
    script:
    - cd development
    - mkdir lib obj
    - make
    - cd ..
  - name: "PlatformIO client on Arduino Mega"
    language: python
    python: 2.7
    sudo: false
    cache:
      directories:
      - "~/.platformio"
    install:
    - pip install -U platformio
    - platformio update
    script: platformio run -d Arduino_IDE/client -e mega
  - script: platformio run -d Arduino_IDE/client -e tiva
  - script: platformio run -d Arduino_IDE/server

  - stage: "Examples"
    script:
    - cd GuruxDLMSClientExample
    - mkdir obj bin
    - make
    - cd ..
  - script:
    - cd GuruxDLMSServerExample
    - mkdir obj bin
    - make
    - cd ..
  - script:
    - cd GuruxDLMSSimpleServerExample
    - mkdir obj bin
    - make
    - cd ..
